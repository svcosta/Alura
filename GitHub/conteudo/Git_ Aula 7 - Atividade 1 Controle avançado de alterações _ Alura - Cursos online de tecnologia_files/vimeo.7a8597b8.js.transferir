!function(){function a(){var a=h.data("section-id"),c=h.data("task-id"),e=h.data("course"),f=h.data("course-id"),i=h.data("playback-rate"),j=h.data("quality"),k=h.data("gnarus-name"),l="/course/"+e+"/task/"+c+"/video";$.get(l,function(c){b(c,a,f,i,j,k),g(f,a,i,j),$("#loading").remove(),$("#video-player-frame").bind("contextmenu",function(){return!1}),h.hasClass("custom-player")&&$("#video-player-frame").remove()}).fail(d)}function b(a,b,d,e,f,g){var i="/images/video/vinheta-"+g+".png",j=$('<video id="video-player-frame" class="video-js vjs-default-skin video-player-frame video-player" controls preload="auto" poster="'+i+'"></video>');$.each(a,function(){var a=$('<source type="video/mp4">');a.attr("src",this.link),a.attr("data-res",this.quality),j.append(a)}),c()&&j.hide(),h.append(j)}function c(){return h.children("iframe").size()>0}function d(){if(!c()){$("#loading").remove();var a=$(".video-changePlayer");a.unbind("click"),a.attr("title","O player com controle de velocidade está temporariamente indisponível.");$(".settings-box-item-player").addClass("settings-box-item-player--disabled");$(".video-changePlayer span").show(),e()}}function e(){0==$("#vimeo-iframe").length&&f(),$("#video-player-frame").toggle(),$("#vimeo-iframe").toggle(),$("#boavista_player").toggle(),$("#loading").toggle(),videojs("video-player-frame").pause()}function f(){var a=$(".video-changePlayer").data("uri"),b=$('<iframe id="vimeo-iframe" class="video-js vjs-tech" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>');b.attr("src",a+"?api=1"),b.hide(),h.append(b)}function g(a,b,c,e){function f(){var a=this.playbackRate();$.post("/user/profile/setPlaybackRate",{rate:a}),ga("send","event",{eventCategory:g,eventAction:"ratechange",eventLabel:h,eventValue:a,nonInteraction:!0})}var g="course-video",h="course-"+a+" section-"+b;HDtoggle("video-player-frame",e),videojs("video-player-frame",{playbackRates:[.7,.8,1,1.2,1.5,2],plugins:{HD:{},ga:{eventCategory:g,eventLabel:h}}},function(){this.ga(),this.on("ratechange",f),this.on("error",d)}).ready(function(){this.playbackRate(c)})}var h=$("#video-container-data");$(document).ready(function(){a(),$(".video-changePlayer").on("click",e)}),$(window).keypress(function(a){if(32==a.which&&!$(".skipKeyPress").is(":focus")){var b=document.querySelector("video");b&&(a.preventDefault(),b&&1==b.paused?b.play():b.pause())}})}();